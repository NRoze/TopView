<!-- File: TopView/Views/AccountsView.xaml -->
<ContentView
    x:Class="TopView.Views.AccountsView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:views="clr-namespace:TopView.Views"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">
    <Grid ColumnDefinitions="auto,*">
        <Grid Padding="10" ColumnSpacing="10" x:Name="SettingsGrid" IsVisible="{Binding SettingsDisplayed}"
              InputTransparent="{Binding SettingsDisplayed}" BackgroundColor="Transparent"
              CascadeInputTransparent="False"
              HorizontalOptions="Fill" VerticalOptions="Fill" Grid.Column="0">
            <views:SettingsView 
              CascadeInputTransparent="False"/>
        </Grid>
        <Grid Padding="10" ColumnSpacing="10" ColumnDefinitions="2*,Auto,3*" x:Name="MainGrid" InputTransparent="{Binding SettingsDisplayed}"
          IsVisible="{Binding SettingsDisplayed, Converter={StaticResource InverseBoolConverter}}"
              BackgroundColor="Transparent" Grid.Column="1">
            <VerticalStackLayout Grid.Column="0" Spacing="5" Margin="0,0,0,0">
                <Label
                    x:Name="SettingsIcon"
                    Text="⚙"
                    FontSize="20"
                    TextColor="{AppThemeBinding Light=#000, Dark=#fff}">
                <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnSettingsTapped" />
                    </Label.GestureRecognizers>
                </Label>
                <Button Text="Add Account" Margin="0,10,0,0"
                        Command="{Binding AddAccountCommand}"
                        HorizontalOptions="Start"/>

                <CollectionView ItemsSource="{Binding Accounts}"
                                SelectionMode="Single"
                                SelectedItem="{Binding SelectedAccount, Mode=TwoWay}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="5" Margin="0">
                                <Label Text="{Binding Name}" VerticalOptions="Center" FontAttributes="Bold"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
            <Border Grid.Column="1" StrokeThickness="1"/>
            <views:AccountView Grid.Column="2" BindingContext="{Binding SelectedAccount}"
                         x:Name="m_AccountView"
                         HorizontalOptions="Fill" 
                         VerticalOptions="Fill"></views:AccountView>
            <views:Overview Grid.Column="2" BindingContext="{Binding SelectedAccount}"
                        x:Name="m_Overview"
                     HorizontalOptions="Fill" 
                     VerticalOptions="Fill"></views:Overview>

        </Grid>
    </Grid>
</ContentView>
